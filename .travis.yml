language: rust
sudo: false

rust:
  - stable
  - beta
  - nightly
os: linux
matrix:
  fast_finish: true

cache:
  - ~/.cargo

script:
  - cargo test --all
before_deploy:
  - cargo build --release --all

deploy:
  - provider: releases
    api_key: $AUTH_TOKEN
    file:
      - target/release/dip
    on:
      condition: $TRAVIS_RUST_VERSION = stable
      tags: true
    skip_cleanup: true

